{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import backend_url from'../config/config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Roles=()=>{const[roles,setRoles]=useState([]);const[newRole,setNewRole]=useState('');const[showModal,setShowModal]=useState(false);const[editMode,setEditMode]=useState(false);const[currentRoleId,setCurrentRoleId]=useState(null);const fetchRoles=async()=>{const res=await axios.get(\"\".concat(backend_url,\"/roles\"));setRoles(res.data);};useEffect(()=>{fetchRoles();},[]);const handleAddRole=async()=>{if(newRole.trim()){await axios.post(\"\".concat(backend_url,\"/roles\"),{name:newRole});setNewRole('');setShowModal(false);fetchRoles();}};const handleUpdateRole=async()=>{if(newRole.trim()&&currentRoleId){await axios.put(\"\".concat(backend_url,\"/roles/\").concat(currentRoleId),{name:newRole});setNewRole('');setCurrentRoleId(null);setEditMode(false);setShowModal(false);fetchRoles();}};const handleDelete=async id=>{const confirmDelete=window.confirm(\"Are you sure you want to delete this role?\");if(confirmDelete){await axios.delete(\"\".concat(backend_url,\"/roles/\").concat(id));fetchRoles();}};const openEditModal=role=>{setEditMode(true);setCurrentRoleId(role._id);setNewRole(role.name);setShowModal(true);};const closeModal=()=>{setShowModal(false);setEditMode(false);setNewRole('');setCurrentRoleId(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Roles\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-[#735dff] text-white px-4 py-2 rounded\",onClick:()=>setShowModal(true),children:\"Add Role\"})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded shadow-md w-1/3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:editMode?'Edit Role':'Add New Role'}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newRole,onChange:e=>setNewRole(e.target.value),placeholder:\"Enter role name\",className:\"w-full border p-2 mb-4 rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"text-gray-500\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:editMode?handleUpdateRole:handleAddRole,className:\"bg-green-500 text-white px-4 py-2 rounded\",children:editMode?'Update':'Save'})]})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border mt-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 border-b\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 border-b\",children:\"Role Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 border-b\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:roles.map((role,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 border-b text-center\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 border-b text-center\",children:role.name}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 border-b text-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(role),className:\"text-[#735dff] hover:underline\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(role._id),className:\"text-red-500 hover:underline\",children:\"Delete\"})]})]},role._id))})]})]});};export default Roles;","map":{"version":3,"names":["React","useState","useEffect","axios","backend_url","jsx","_jsx","jsxs","_jsxs","Roles","roles","setRoles","newRole","setNewRole","showModal","setShowModal","editMode","setEditMode","currentRoleId","setCurrentRoleId","fetchRoles","res","get","concat","data","handleAddRole","trim","post","name","handleUpdateRole","put","handleDelete","id","confirmDelete","window","confirm","delete","openEditModal","role","_id","closeModal","className","children","onClick","type","value","onChange","e","target","placeholder","map","index"],"sources":["C:/Haris/Project/Project/frontend/src/pages/Roles.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport backend_url from '../config/config';\r\n\r\nconst Roles = () => {\r\n  const [roles, setRoles] = useState([]);\r\n  const [newRole, setNewRole] = useState('');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [currentRoleId, setCurrentRoleId] = useState(null);\r\n\r\n  const fetchRoles = async () => {\r\n    const res = await axios.get(`${backend_url}/roles`);\r\n    setRoles(res.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, []);\r\n\r\n  const handleAddRole = async () => {\r\n    if (newRole.trim()) {\r\n      await axios.post(`${backend_url}/roles`, { name: newRole });\r\n      setNewRole('');\r\n      setShowModal(false);\r\n      fetchRoles();\r\n    }\r\n  };\r\n\r\n  const handleUpdateRole = async () => {\r\n    if (newRole.trim() && currentRoleId) {\r\n      await axios.put(`${backend_url}/roles/${currentRoleId}`, { name: newRole });\r\n      setNewRole('');\r\n      setCurrentRoleId(null);\r\n      setEditMode(false);\r\n      setShowModal(false);\r\n      fetchRoles();\r\n    }\r\n  };\r\n\r\n const handleDelete = async (id) => {\r\n  const confirmDelete = window.confirm(\"Are you sure you want to delete this role?\");\r\n  if (confirmDelete) {\r\n    await axios.delete(`${backend_url}/roles/${id}`);\r\n    fetchRoles();\r\n  }\r\n};\r\n\r\n  const openEditModal = (role) => {\r\n    setEditMode(true);\r\n    setCurrentRoleId(role._id);\r\n    setNewRole(role.name);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setEditMode(false);\r\n    setNewRole('');\r\n    setCurrentRoleId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 z-10\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-xl font-bold\">Roles</h2>\r\n        <button\r\n          className=\"bg-[#735dff] text-white px-4 py-2 rounded\"\r\n          onClick={() => setShowModal(true)}\r\n        >\r\n          Add Role\r\n        </button>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center\">\r\n          <div className=\"bg-white p-6 rounded shadow-md w-1/3\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">\r\n              {editMode ? 'Edit Role' : 'Add New Role'}\r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={newRole}\r\n              onChange={(e) => setNewRole(e.target.value)}\r\n              placeholder=\"Enter role name\"\r\n              className=\"w-full border p-2 mb-4 rounded\"\r\n            />\r\n            <div className=\"flex justify-end gap-2\">\r\n              <button onClick={closeModal} className=\"text-gray-500\">\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={editMode ? handleUpdateRole : handleAddRole}\r\n                className=\"bg-green-500 text-white px-4 py-2 rounded\"\r\n              >\r\n                {editMode ? 'Update' : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <table className=\"min-w-full bg-white border mt-4\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"py-2 border-b\">ID</th>\r\n            <th className=\"py-2 border-b\">Role Name</th>\r\n            <th className=\"py-2 border-b\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {roles.map((role, index) => (\r\n            <tr key={role._id}>\r\n              <td className=\"py-2 border-b text-center\">{index + 1}</td>\r\n              <td className=\"py-2 border-b text-center\">{role.name}</td>\r\n              <td className=\"py-2 border-b text-center space-x-2\">\r\n                <button\r\n                  onClick={() => openEditModal(role)}\r\n                  className=\"text-[#735dff] hover:underline\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDelete(role._id)}\r\n                  className=\"text-red-500 hover:underline\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Roles;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACiB,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAExD,KAAM,CAAAmB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,IAAAC,MAAA,CAAInB,WAAW,UAAQ,CAAC,CACnDO,QAAQ,CAACU,GAAG,CAACG,IAAI,CAAC,CACpB,CAAC,CAEDtB,SAAS,CAAC,IAAM,CACdkB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAIb,OAAO,CAACc,IAAI,CAAC,CAAC,CAAE,CAClB,KAAM,CAAAvB,KAAK,CAACwB,IAAI,IAAAJ,MAAA,CAAInB,WAAW,WAAU,CAAEwB,IAAI,CAAEhB,OAAQ,CAAC,CAAC,CAC3DC,UAAU,CAAC,EAAE,CAAC,CACdE,YAAY,CAAC,KAAK,CAAC,CACnBK,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAED,KAAM,CAAAS,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAIjB,OAAO,CAACc,IAAI,CAAC,CAAC,EAAIR,aAAa,CAAE,CACnC,KAAM,CAAAf,KAAK,CAAC2B,GAAG,IAAAP,MAAA,CAAInB,WAAW,YAAAmB,MAAA,CAAUL,aAAa,EAAI,CAAEU,IAAI,CAAEhB,OAAQ,CAAC,CAAC,CAC3EC,UAAU,CAAC,EAAE,CAAC,CACdM,gBAAgB,CAAC,IAAI,CAAC,CACtBF,WAAW,CAAC,KAAK,CAAC,CAClBF,YAAY,CAAC,KAAK,CAAC,CACnBK,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAEF,KAAM,CAAAW,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CAClC,KAAM,CAAAC,aAAa,CAAGC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAClF,GAAIF,aAAa,CAAE,CACjB,KAAM,CAAA9B,KAAK,CAACiC,MAAM,IAAAb,MAAA,CAAInB,WAAW,YAAAmB,MAAA,CAAUS,EAAE,CAAE,CAAC,CAChDZ,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAEC,KAAM,CAAAiB,aAAa,CAAIC,IAAI,EAAK,CAC9BrB,WAAW,CAAC,IAAI,CAAC,CACjBE,gBAAgB,CAACmB,IAAI,CAACC,GAAG,CAAC,CAC1B1B,UAAU,CAACyB,IAAI,CAACV,IAAI,CAAC,CACrBb,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAyB,UAAU,CAAGA,CAAA,GAAM,CACvBzB,YAAY,CAAC,KAAK,CAAC,CACnBE,WAAW,CAAC,KAAK,CAAC,CAClBJ,UAAU,CAAC,EAAE,CAAC,CACdM,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,mBACEX,KAAA,QAAKiC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBlC,KAAA,QAAKiC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDpC,IAAA,OAAImC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC5CpC,IAAA,WACEmC,SAAS,CAAC,2CAA2C,CACrDE,OAAO,CAAEA,CAAA,GAAM5B,YAAY,CAAC,IAAI,CAAE,CAAA2B,QAAA,CACnC,UAED,CAAQ,CAAC,EACN,CAAC,CAEL5B,SAAS,eACRR,IAAA,QAAKmC,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpFlC,KAAA,QAAKiC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eACnDpC,IAAA,OAAImC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACvC1B,QAAQ,CAAG,WAAW,CAAG,cAAc,CACtC,CAAC,cACLV,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjC,OAAQ,CACfkC,QAAQ,CAAGC,CAAC,EAAKlC,UAAU,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC5CI,WAAW,CAAC,iBAAiB,CAC7BR,SAAS,CAAC,gCAAgC,CAC3C,CAAC,cACFjC,KAAA,QAAKiC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCpC,IAAA,WAAQqC,OAAO,CAAEH,UAAW,CAACC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAEvD,CAAQ,CAAC,cACTpC,IAAA,WACEqC,OAAO,CAAE3B,QAAQ,CAAGa,gBAAgB,CAAGJ,aAAc,CACrDgB,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAEpD1B,QAAQ,CAAG,QAAQ,CAAG,MAAM,CACvB,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,cAEDR,KAAA,UAAOiC,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAChDpC,IAAA,UAAAoC,QAAA,cACElC,KAAA,OAAAkC,QAAA,eACEpC,IAAA,OAAImC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,IAAE,CAAI,CAAC,cACrCpC,IAAA,OAAImC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cAC5CpC,IAAA,OAAImC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,EACxC,CAAC,CACA,CAAC,cACRpC,IAAA,UAAAoC,QAAA,CACGhC,KAAK,CAACwC,GAAG,CAAC,CAACZ,IAAI,CAAEa,KAAK,gBACrB3C,KAAA,OAAAkC,QAAA,eACEpC,IAAA,OAAImC,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAES,KAAK,CAAG,CAAC,CAAK,CAAC,cAC1D7C,IAAA,OAAImC,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEJ,IAAI,CAACV,IAAI,CAAK,CAAC,cAC1DpB,KAAA,OAAIiC,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACjDpC,IAAA,WACEqC,OAAO,CAAEA,CAAA,GAAMN,aAAa,CAACC,IAAI,CAAE,CACnCG,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAC3C,MAED,CAAQ,CAAC,cACTpC,IAAA,WACEqC,OAAO,CAAEA,CAAA,GAAMZ,YAAY,CAACO,IAAI,CAACC,GAAG,CAAE,CACtCE,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CACzC,QAED,CAAQ,CAAC,EACP,CAAC,GAhBEJ,IAAI,CAACC,GAiBV,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAA9B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}